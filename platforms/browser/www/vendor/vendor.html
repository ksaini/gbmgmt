<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <meta name="format-detection" content="telephone=no" />
      <meta name="msapplication-tap-highlight" content="no" />
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
      <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
      <!---<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />---->
      
	  <link href="../assets/css/font-awesome.min.css" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="../css/index.css" />
      <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	  <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	  
	  <script src="../js/moment.min.js"></script>   
<script src="../js/jquery-1.10.2.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/bootstrap-datetimepicker.min.js"></script>
	  <script src="../assets/js/bootstrap-datetimepicker.min.js"></script>
      <title>GreyBox Admin</title>
	  <style>
body {
	#background-image:url(img/s71.png);
	background-size: 100% 100%;
    width: 100%;
    height: 100%;
    height: auto !important;
    min-height:100%;
	text-transform:inherit;
	height: 100%;
	
}	
.chat
{
    list-style: none;
    margin: 0;
    padding-top: 5px;
	padding-bottom: 10px;
	padding-left:15px;
	padding-right:5px;
	border-bottom:1px solid #E0E0E0;
	
}

.chat li
{
    margin-bottom: 2px;
    padding-bottom: 2px;
	color:#B3A9A9;
    border-bottom: 1px dotted #B3A9A9;
	height:30px;
	vertical-align:middle;
}

.chat li.left .chat-body
{
    margin-left: 60px;
}

.chat li.right .chat-body
{
    margin-right: 60px;
	
}

.valtext {
	font-family: 'open_sans','Open Sans',sans-serif;
    font-size: 14px;
    font-weight: 500;
	color: #4F545B;
	contenteditable = true;
	box-shadow: none;
	border-bottom: 0px;
	border-top: 0px;
	border-left: 0px;
	border-right: 0px;
	margin-bottom:0px;
	letter-spacing: 1px;
}

.chat li .chat-body p
{
    margin: 0;
	width:100%;
    color: #F5F5F5;
}

.panel .slidedown .glyphicon, .chat .glyphicon
{
    margin-right: 5px;
}

.sticky {
  
}
.smallf3 {
	font-size:11px;
	text-align:left;
	font-weight: 400;
	
}
.smallf4 {
	font-size:12px;
	text-align:left;
	font-weight: 400;
	margin-bottom:5px;
}
.stickyfooter {
  position: fixed;
  bottom:0;
}
.panel-body
{
    overflow-y: scroll;
	min-height: 760px;
    height: 100%;
	padding-top: 45px;
}
.panel-footer{
	padding: 1px 5px;
}
.slots{
 background-color:#eee;
}
.slots:focus {outline:0;}

::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
    background-color: #F5F5F5;
}

.navbar-custom{
	background-color: #8159bb;
}
a{
	color:white
}

.toolbar {
	font-family: 'open_sans','Open Sans',sans-serif;
    text-align: center;
    padding-bottom:7px;padding-top:7px;
	font-size:10px;
	padding-left: 5px;
    padding-right: 5px;
}
input:focus,
select:focus,
button:focus {
    outline: none;
}
.desc {
	font-size:12px;
	padding-left:0px;
}
.trbody{
	font-family: 'open_sans','Open Sans',sans-serif;	
	letter-spacing: 1px;
	font-size:12px;
	height:30px;
	font-weight:bold;
	padding-left: 15px;
    padding-top: 5px;
	border: 1px solid #d3d3d3;
	border-bottom:none;
	padding-bottom:10px;
}
.trhead {
	background: #aa8fd1;<!---#4285f4;--->
	font-family: 'open_sans','Open Sans',sans-serif;	
	letter-spacing: 1px;
	color:white;
	font-size:14px;
	height:30px;
	font-weight:bold;
	padding-left: 15px;
    padding-top: 5px;
	border: 1px solid #d3d3d3;
}
.trans {
	font-family:'Roboto','Arial','Helvetica',sans-serif!important;
	font-weight:500;
}
.advance{
	font-size:7px;
	font-style: italic;
}
.pmt {
	font-family: 'open_sans','Open Sans',sans-serif;
    text-align: center;
    
    font-size: 16px;
    font-weight: 500;
	color: #636972;
	contenteditable = true;
	box-shadow: none;
	border-bottom: 1px solid #B3A9A9;
	border-top: 0px;
	border-left: 0px;
	border-right: 0px;
	margin-bottom:0px;
	letter-spacing: 3px;
}
.pmt:focus {
	border:0;
	box-shadow: none;
	border-bottom: 1px solid #B3A9A9;
	color:#8159bb;
}
</style>
     
   </head>
   <body >
     
<nav class="navbar navbar-custom navbar-fixed-top" ">
  <div class="container-fluid">
    <div class="navbar-header" >
      <a class="navbar-brand" style="width:100%;text-align:center;" href="../dashboard.html"><i style="position: absolute;left:5px;;" class="fa fa-home" aria-hidden="true"></i> <span style="font-size:14px;">Vendor Profile</span></a>
    </div>
   
  </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-sm-5" style="padding-right:0px;padding-left:0px;">
            <div class="panel panel-primary">
                <div class="panel-body" id="p0"> 
				<div class="sticky">
					
				<div id="toolbar1" class="row " style="border-bottom: 1px solid #ccc;padding-top:10px;padding-bottom:5px;">
					<div class="content col-md-12 col-xs-12 toolbar" id="tb1" onclick="addVendor()" style="text-align:center;border-right:1px solid #E0E0E0;">
						<p class="valtext "><i class="fa fa-plus " ></i> Add Vendor</p>
					    <p class="valtext " style="font-size:10px;font-weight:300">(Tap on vendor to add bill)</p>
					</div>
				</div>
				<div class="row trbody" style="height:100%;padding-top:15px;border-bottom:1px solid #E0E0E0;display:none;" id="vndr">
					<ul class="chat valtext" id="chat" style="display: flex;">
						<p style="padding-top:7px;width:70px;">Vendor Name </p>
						<input type="text" class="form-control pmt" id='vname' style="width:70%"  ></input>
						<input type="hidden" id='topay_h'></input>
                    </ul>
					<ul class="chat valtext" id="chat" style="display: flex;">
						<p style="padding-top:7px;width:70px;">Contact Person </p>
						<input type="text" class="form-control pmt" id='vcontact' style="width:70%" placeholder="" ></input>
						
                    </ul>
					<ul class="chat valtext" id="chat" style="display: flex;">
						<p style="padding-top:7px;width:70px;">Mobile</p>
						<input type="text" class="form-control pmt" id='vcn' style="width:70%" placeholder="xxx-xxx-xxxx" ></input>
						
                    </ul>
					<ul class="chat valtext" id="chat" style="display: flex;">
						<p style="padding-top:7px;width:70px;">Address</p>
						<input type="text" class="form-control pmt" id='vaddr' style="width:70%" placeholder="" ></input>
						
                    </ul>
					<ul class="chat valtext" id="chat" style="display: flex;">
						<button class="btn " style="font-size:14px;width:100%;margin-right:30px" onclick="vcancel();">Cancel</button>
						<button class="btn " id='addbtn' style="font-weight:600;font-size:14px;width:100%" onclick="vadd();">Add</button>
                    </ul>
					<div id="errmsg" style="font-size:10px;color:red;"></div>
					
				</div>
				</div>
				
				<ul class="chat"  style="margin-top:1px;" id="chist">
				
					<p class = ' text-warning' style='font-size:10px;margin-top:10px;margin-bottom:10px;letter-spacing: 1px;'>No vendor is registered. Add a new vendor.</p>
				</ul>
			</div>
		</div>	
	</div>
</div>
</div>
 <script type="text/javascript" src="../js/dataTbl.js"></script>
<script>
	 
getData("q=SELECT * from d_vendor_tbl where did='" + localStorage.did + "' order by vid desc ;",0,"dataTbl.php",showVendor,eVendor);
	
function addVendor(){
	$("#vndr").css("display", "block");
}	
function vcancel(){
	$("#vndr").css("display", "none");
}
function vadd(){
  $("#errmsg").html("");	
  var vname = $("#vname").val();
  var vcontact = $("#vcontact").val();
  var vcn = $("#vcn").val();
  var vaddr = $("#vaddr").val();
  var q = "vname="+vname+"&vcontact="+vcontact+"&vcn="+vcn+"&vaddr="+vaddr+ "&did="+localStorage.did+"&vid=0";
  
  if(vname.trim().length >2 &&  vcontact.trim().length > 2){
	$("addbtn").prop('disabled', true);
	getData(q,0,"saveVendor.php",sVendor,eVendor);
  }
  else
	$("#errmsg").html("Fill Name and Contacts first");
}
function sVendor(){
	$("addbtn").prop('disabled', false);
	$("#vndr").css("display", "none");
	location.reload();
}	
function eVendor(){
	$("#vndr").css("display", "none");
}		
		
		
function showVendor(data){
	try{
	var d = JSON.parse(jsonEscape(data));  //jsonEscape to handel new line
	var txt = "";
	var tmp =0;
	for (i = 0; i < d.length; i++) {
		var name = d[i]["name"];
		var contact = d[i]["contact"];
		var cn = d[i]["cn"];
				
		txt += "<li class='chat' style='margin-left:-30px;margin-right: -30px;height:55px;' onclick=vendorDetail("+d[i]["vid"]+") >";
		txt += "<div class='row desc'>";
		txt += "<div class='col-xs-12' style='padding-right:0px;letter-spacing:2px'>" + name   +"</div>";
		txt += "</div><div class='row desc'>"
		txt += "<div class='col-xs-6' style='color: darkslateblue;font-size:12px;'>" + contact   +"</div>";
		txt += "<div class='col-xs-6' >" +cn  + "</div>";
		txt += "</div></li>";
				
	}
			
	document.getElementById("chist").innerHTML = txt;
	} catch(e) { console.log("Exception::-"+e.toString());}
}
function vendorDetail(d){
	location.href='../vendor/details.html?vid='+d;
}		
		
</script>	